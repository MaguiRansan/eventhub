<div class="card">
    <div class="card-body">
        <form id="eventForm" action="{% if event.id %}{% url 'event_edit' id=event.id %}{% else %}{% url 'event_form' %}{% endif %}" method="POST">
            {% csrf_token %}
            <div class="vstack gap-3">
                <div>
                    <label for="title" class="form-label">Título del Evento</label>
                    <input class="form-control"
                        id="title"
                        required
                        type="text"
                        value="{{ event.title }}"
                        name="title" />
                </div>
                <div>
                    <label for="description" class="form-label">Descripción</label>
                    <textarea
                        class="form-control"
                        id="description"
                        name="description"
                        rows="4"
                        required>{{ event.description }}</textarea>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label for="date" class="form-label">Fecha</label>
                        <input
                            class="form-control"
                            id="date"
                            required
                            type="date"
                            name="date"
                            value="{{ event.scheduled_at|date:'Y-m-d' }}"
                            min="{{ min_date }}" />
                    </div>
                    <div class="col-md-6">
                        <label for="time" class="form-label">Hora</label>
                        <input
                            class="form-control"
                            id="time"
                            required
                            type="time"
                            value="{{ event.scheduled_at|date:'H:i' }}"
                            name="time" />
                    </div>
                </div>

                <div>
                    <label for="venue" class="form-label">Ubicación del evento</label>
                    <select class="form-select" id="venue" name="venue" required {% if not venues %}disabled{% endif %}>
                        <option value="">Seleccionar lugar</option>
                        {% for venue in venues %}
                            <option value="{{ venue.id }}" {% if event.venue.id == venue.id %}selected{% endif %}>
                                {{ venue.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Categorías</label>
                    <div class="row">
                        {% for cat in categories %}
                            <div class="col-md-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="categories" value="{{ cat.id }}"
                                        {% if cat in event.categories.all %}checked{% endif %}>
                                    <label class="form-check-label">{{ cat.name }}</label>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div>
                    <button type="submit" class="btn btn-primary">
                        {% if event.id %}
                            Guardar Cambios
                        {% else %}
                            Crear Evento
                        {% endif %}
                    </button>
                    <a href="{% url 'events' %}" class="btn btn-outline-secondary ms-2">
                        Cancelar
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
